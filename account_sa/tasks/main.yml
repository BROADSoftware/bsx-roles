---
# This role create and configure 'sa' account for Serge ALEXANDRE preference

  - name: Setup sa account
    user:
      name: sa
      state: present
      comment: Serge ALEXANDRE
      shell: /bin/bash
      # Generated by python -c 'import crypt; print crypt.crypt("xxxxxx", "$6$MySalt32$")'
      password: $6$MySalt32$gQX8.GY7/ClQfpk.HQkwceg9CZB/RP3.q28cUzaymrV6eyZUtjdHALN/jyWDs7jXJw4VHpbBQzs6rlTaj1Dj0/
      
  - name: Append some tools
    blockinfile:
      dest: /home/sa/.bashrc
      backup: yes
      insertafter: EOF
      marker: "# {mark} Ansible managed block (sa shortcut)"
      content: |
        alias l='ls -l'
        alias p='ps -eaf'
        alias c='cd'
        alias s='sudo -s'
        alias 'cls=tput clear'
        PATH=~/bin:$PATH:/sbin:/usr/sbin:/root/bin:/usr/local/sbin

  - name: Set ssh key for user sa
    authorized_key: 
      user: sa
      key: 'ssh-dss AAAAB3NzaC1kc3MAAACBAJilOkJ5ARPY7HoVqy97TCDvyXVNMdMzt7Mb53DX8SsMUXV2rOTgQSA8/uu7Tv5DobWEWdC0dQknjObt9fh4vD5uVxPfVsBDHvpT4UMc9ZcVlXgy0jY6BMHziV/Y+/MO3lGd5qLeHgZa5fJQsp2QviUt1qNUgtQnHyN/fMJiaxjdAAAAFQD+0nER0WNHDhqf0nhQU1Qnn6Vt8QAAAIBDA8fpX6QunF54nZJSVApyvginJkn5ix7qQuvINESpqtSrIA0TFUvJphQPP1v64MHxp561ECVxM2VExI+rBcaMYItTqi6U7P5mIdloplFGeNw1WuUD5bDCIfztJ7QsciHlf2KJpgr58ClZq4bVdHBErWXGBFnA+5aanYZCAGsfpwAAAIEAhjs3chU7iHMDYVd2jxZPq4cR08OtxY9lkuzYaNEQ6lJ0WmHwp/AEjc9cogSGjd6z0vPkUXA8N9tlCh5OU9+4U2kuOa78VVVI58Myy8FxqpSCDu0nffAwptB2anA6Ao8cBWb8f1WmjAoiFF1ndghfrhN4Ad1tgFRYG6QidL78Wb4= sa@bill'

  - name: Install sudo package
    yum: pkg=sudo state=present

  - name: Full sudo rights to user sa
    copy:
      content: |
        sa  ALL=(ALL) NOPASSWD:ALL
      dest: /etc/sudoers.d/sa
      mode: 0400
      owner: root
      group: root
 

